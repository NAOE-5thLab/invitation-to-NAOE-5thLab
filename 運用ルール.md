# 運用ルール

[TOC]

## リポジトリ作成

一つの独立したアプリケーション（論文に使ったコードのまとまりとか）に対して一つのリポジトリを作成することを推奨します。



### リポジトリ名の命名規則

ケバブケース（小文字の英数字を利用、単語の区切りは`-`を使用）の命名を推奨します。また、リポジトリ名だけで内容がわかるように可能な限り丁寧な名前にすることを推奨します。ただし、長すぎる名前は推奨しません。

例

- :o::`sample-git-repository`
- :x::`sample_git_repository`
- :x::`SampleGitRepository`
- :x::`sampleGitRepository`
- :x::`samplegitrepository`

参考

- [gitリポジトリの命名規則](https://zenn.dev/iwatos/articles/cb79814a4b31ed)



### トピック（タグ）をつける

リポジトリが増えてくると、リポジトリ名をどれだけ工夫していても煩雑になってくる可能性があります。そのため、トピックをせってしておくことで、分類することができ、管理が容易になります。

例

- `stability`
- `system identification`
- `reinforcement learning`

参考

- [トピックでリポジトリを分類する](https://docs.github.com/ja/github/administering-a-repository/managing-repository-settings/classifying-your-repository-with-topics)
- [GitHub で管理している社内リポジトリをトピックで分類する (topics)](https://maku77.github.io/git/github/topics.html)



## リポジトリの運用



### ブランチ

#### ブランチの必要性

ブランチはプロジェクトを分岐させることで本体に影響を与えず開発を行うことができる機能です。また、目的別にブランチを切ることで変更して開発を行うことができる。

よって、Gitに慣れていないユーザが致命的なバグを起こしてしまった場合に対応するため、ブランチの使用が推奨されます。そのため、原則としてmainにcommitを行うことは禁止するのが良いと考えられます。



#### ブランチの切り方

ブランチの切り方に厳密なルールはないですが、ベストプラクティス的なルールは定められています。有名なものに**git-flow**と**github-flow**が存在します。

git-flowによる運用を行うのがより厳密ではあるが、その煩雑さと学習コストの高さから、初心者には推奨しない。一方で、github-flowはブランチの切り方がシンプルで使いやすいと思います。

##### github-flow

git-flowでは6種類のブランチを使用するが、github-flowでは2種類のブランチ（main、topic）しか使いません。git-flowでは、リリースのために新しいブランチを作ります。しかし、github-flowでは、masterブランチへのマージとリリース（デプロイ）はほぼ同義です。つまり、git-flowではリリースを特別なイベントと見なしていますが、github-flowでは日常の一部です。このため、masterブランチは常に安定している必要があります。

運用上のルール

- masterブランチは常にリリース可能な状態にしておく
  - マージ＝リリースなので、mainブランチが不安定になるマージは禁止です。mainブランチに直接commitすることも許されません。
- かならずmasterブランチからtopicブランチを切る
  - 機能の追加、バグ修正などを行う場合、mainブランチからtopicブランチを切ります。
- ブランチは定期的にPushする
  - 共有することが重要であれば、定期的にpushすることが推奨されます。
- masterブランチにマージする前にプルリクエストを使ってコードレビューをする
  - マージを行う前に、プルリクエストを行いレビューしてもらうことを推奨します。関連する教員や先輩などに見てもらうといいと思います。いない場合は、飛ばしても大きな問題はないと思います、自己責任ですが。

参考

- [GitHub Flow](http://scottchacon.com/2011/08/31/github-flow.html)

##### git-flows

詳細の説明は省きます。

- `main` : 安定動作版。このソースコードを実機に書き込んだり、また検証用シミュレータに取り込んでも問題が起こらないとされているバージョン。
- `release` : `develop`→`main`のmergeが大変なときに使う一時的なbranch。`main`へのmerge時に`develop`の更新を止めないようにするためにつくる。
- `develop` : `feature`で実装され、検証が終わったら`develop`にmergeされる。したがって、おそらく問題ないと思われているコードの最新版が集積される。
- `feature` : 機能開発branch。`develop`から切られ，`develop`にmergeされる。

![git-model](./img/git-model.png)

参考

- [Git-flowって何？](https://qiita.com/KosukeSone/items/514dd24828b485c69a05)
- [A successful Git branching model](https://nvie.com/posts/a-successful-git-branching-model/)

##### 















